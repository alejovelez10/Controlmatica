<%= javascript_pack_tag 'ConstCenterShow' %> 
<%= react_component('ConstCenterShow', cost_center: @cost_center, usuario: current_user, estados: @estados, clientes: get_customer) %>

<%# link_to "Volver", cost_centers_path , class: "btn btn-primary"%>
<%# link_to "Editar", edit_cost_center_path(@cost_center.id) , class: "btn btn-primary"%>

    <%# ing_cotizado = @cost_center.engineering_value

          ing_real = @cost_center.reports.sum(:working_value)
          via_cotizado = @cost_center.viatic_value
          via_real = @cost_center.reports.sum(:viatic_value)

          horas_eje = @cost_center.reports.sum(:working_time)

          facturacion = @cost_center.customer_invoices.sum(:invoice_value)

          porc_eje =  @cost_center.eng_hours > 0 ? ((horas_eje.to_f/@cost_center.eng_hours)*100).to_i : "N/A"

          costo_real_en_dinero = @cost_center.hour_real * horas_eje
          costo_en_dinero = @cost_center.hour_real * @cost_center.eng_hours

          porc_eje_costo =  costo_en_dinero > 0 ? (((costo_real_en_dinero.to_f/costo_en_dinero)*100)).to_i : "N/A"

          porc_via =  via_cotizado > 0 ? ((via_real.to_f/via_cotizado)*100).to_i : "N/A" 

          porc_fac =  @cost_center.quotation_value > 0 ? ((facturacion.to_f/@cost_center.quotation_value)*100).to_i : "N/A" 

          total_eje = @cost_center.hour_real * horas_eje

          total_cot= @cost_center.hour_cotizada * horas_eje

          total_margen = total_cot - total_eje 

          porc_ejec =  total_cot > 0 ? ((total_margen.to_f/total_cot)*100).to_i : "N/A" 


          
    %>
